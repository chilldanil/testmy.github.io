<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bootstrap Website</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    /* Add custom styles here */
    body {
      padding-top: 70px; /* Adjust this value according to your navbar height */
    }
    
    .navbar-brand {
      font-size: 20px;
      font-weight: bold;
    }
    
    .go-to-top {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 99;
      border: none;
      outline: none;
      background-color: #6c757d;
      color: white;
      cursor: pointer;
      padding: 10px;
      border-radius: 50%;
      width: 44px;
    }
    
    .go-to-top.active {
      display: block;
    }

    .status {
      padding: 5px 10px;
      border-radius: 3px;
      color: #fff;
      font-weight: bold;
      text-align: center;
    }
    
    .status.open {
      background-color: #dc3545; /* Red */
    }
    
    .status.in-progress {
      background-color: #ffc107; /* Yellow */
    }
    
    .status.resolved {
      background-color: #28a745; /* Green */
    }
    
    .card-title {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }
    
    .card-text {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#">
        ISTT
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <!-- Add your navigation links here -->
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="#">Logout</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Add your website content here -->
  <div class="container mt-4">  
    <div class="row">
      <div class="col-md-4">
        <div class="card mb-4">
          <img src="img/1.png" class="card-img-top" alt="Image 1">
          <div class="card-body">
            <h5 class="card-title">This is a sample title with more than 25 characters</h5>
            <h6 class="card-subtitle mb-2 text-muted">Card Subtitle 1</h6>
            <h6 class="card-subtitle mb-2 text-muted coords">48.511392, 39.444880</h6>
            <div class="location-name"></div>
            <p class="card-text">This is a sample description for Card 1 with more than 70 characters. It will be truncated with an ellipsis at the end.</p>
            <div class="d-flex justify-content-between align-items-center">
              <a href="#" class="btn btn-primary">More</a>
              <div class="status resolved">Ressolved</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card mb-4">
          <img src="img/2.png" class="card-img-top" alt="Image 1">
          <div class="card-body">
            <h5 class="card-title">This is a sample title with more than 25 characters</h5>
            <h6 class="card-subtitle mb-2 text-muted">Card Subtitle 1</h6>
            <h6 class="card-subtitle mb-2 text-muted coords">18.511392, 79.444880</h6>
            <div class="location-name"></div>
            <p class="card-text">This is a sample description for Card 1 with more than 70 characters. It will be truncated with an ellipsis at the end.</p>
            <div class="d-flex justify-content-between align-items-center">
              <a href="#" class="btn btn-resolved">More</a>
              <div class="status in-progress">In-progress</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-4">
        <div class="card mb-4">
          <img src="img/3.png" class="card-img-top" alt="Image 1">
          <div class="card-body">
            <h5 class="card-title">This is a sample title with more than 25 characters</h5>
            <h6 class="card-subtitle mb-2 text-muted">Card Subtitle 1</h6>
            <h6 class="card-subtitle mb-2 text-muted coords">68.511392, 29.444880</h6>
            <div class="location-name"></div>
            <p class="card-text">This is a sample description for Card 1 with more than 70 characters. It will be truncated with an ellipsis at the end.</p>
            <div class="d-flex justify-content-between align-items-center">
              <a href="#" class="btn btn-primary">More</a>
              <div class="status open">Open</div>
            </div>
          </div>
        </div>
      </div>
      
      
      <!-- Add more card elements here -->
      
    </div>
  </div>
  
  <!-- Go to Top button -->
  <button class="go-to-top" id="goToTopBtn">&#8593;</button>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    $(document).ready(function() {
      // Show or hide the "Go to Top" button based on scroll position
      $(window).scroll(function() {
        if ($(this).scrollTop() > 200) {
          $('#goToTopBtn').addClass('active');
        } else {
          $('#goToTopBtn').removeClass('active');
        }
      });
      
      // Smooth scroll animation when clicking the "Go to Top" button
      $('#goToTopBtn').click(function() {
        $('html, body').animate({ scrollTop: 0 }, 'slow');
      });

      // Function to get locality name using Mapbox Geocoding API
      function getLocalityName(lat, lng, element) {
        const apiKey = 'pk.eyJ1IjoiY2hpbGxkYW5pbGwiLCJhIjoiY2xqYmw2bmh1Mjc1czNubnhmd3U4NnNtMyJ9.WedrlLEXsM6zbspzOZGnfw'; // Replace with your Mapbox API key
        const geocodingApiUrl = `https://api.mapbox.com/geocoding/v5/mapbox.places/${lng},${lat}.json?access_token=${apiKey}`;

        $.ajax({
          url: geocodingApiUrl,
          method: 'GET',
          success: function(response) {
            const features = response.features;
            if (features && features.length > 0) {
              const localityName = features[0].place_name;
              $(element).text(localityName);
            }
          },
          error: function(xhr, status, error) {
            console.log(error);
          }
        });
      }

      // Get locality names for each card
      $('.coords').each(function() {
        const coords = $(this).text().split(', ');
        const latitude = parseFloat(coords[0]);
        const longitude = parseFloat(coords[1]);
        const locationNameElement = $(this).siblings('.location-name');
        getLocalityName(latitude, longitude, locationNameElement);
      });
    });
  </script>
</body>
</html>
